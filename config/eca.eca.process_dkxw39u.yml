uuid: d4250c14-e432-46d3-aa46-8353e866a45c
langcode: en
status: true
dependencies:
  config:
    - views.view.all_certificates
    - views.view.list_certificate
  module:
    - eca_base
    - eca_user
    - eca_views
id: process_dkxw39u
modeller: bpmn_io
label: |
  u
version: ''
weight: null
events:
  Event_0rss1z5:
    plugin: 'eca_base:eca_cron'
    label: Cron
    configuration:
      frequency: '* * * * *'
    successors:
      -
        id: Activity_0csisdj
        condition: ''
conditions: {  }
gateways:
  Gateway_02znx3b:
    type: 0
    successors:
      -
        id: Activity_1hjgpzx
        condition: ''
actions:
  Activity_11747qa:
    plugin: eca_views_query
    label: 'Load certificate view'
    configuration:
      token_name: certificates
      view_id: all_certificates
      display_id: default
      arguments: ''
    successors:
      -
        id: Gateway_02znx3b
        condition: ''
  Activity_1hjgpzx:
    plugin: eca_list_remove
    label: 'Drop first item'
    configuration:
      value: ''
      token_name: certificate
      method: first
      index: ''
      list_token: certificates
    successors:
      -
        id: Activity_1u2avaw
        condition: ''
  Activity_0csisdj:
    plugin: eca_switch_account
    label: Switch
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_11747qa
        condition: ''
  Activity_1u2avaw:
    plugin: eca_switch_account
    label: 'switch to employee'
    configuration:
      user_id: '[field_employee:entity:uid]'
    successors:
      -
        id: Gateway_02znx3b
        condition: ''
      -
        id: Activity_19ezafi
        condition: ''
  Activity_19ezafi:
    plugin: eca_views_query
    label: 'query view "MY certificate"'
    configuration:
      token_name: my_certificate
      view_id: list_certificate
      display_id: block_1
      arguments: ''
    successors:
      -
        id: Activity_1wdj8o4
        condition: ''
  Activity_1wdj8o4:
    plugin: eca_count
    label: 'count certificate users'
    configuration:
      token_name: number_certificate
      list_token: my_certificate
    successors: {  }
