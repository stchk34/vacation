uuid: b7237b83-41c4-480d-88f9-1a18b6abdf8e
langcode: en
status: true
dependencies:
  config:
    - field.field.node.certificate.field_current_state_certificate
    - field.field.node.certificate.field_limit_
    - field.field.node.transaction.field_certificate
    - field.field.node.transaction.field_days
    - field.field.node.transaction.field_owner
    - field.field.node.transaction.field_status_transactions
    - field.field.node.transaction.field_type_paid_vacation
    - field.field.node.transaction.field_vacat
    - field.field.node.vacation_request.field_approver
    - field.field.node.vacation_request.field_certificate_in_request
    - field.field.node.vacation_request.field_count_approvers
    - field.field.node.vacation_request.field_duration_example
    - field.field.node.vacation_request.field_duration_not_paid_vacation
    - field.field.node.vacation_request.field_duration_notpaid_in_hours
    - field.field.node.vacation_request.field_duration_of_the_paid_vacat
    - field.field.node.vacation_request.field_employee_sender
    - field.storage.node.field_approver
    - field.storage.node.field_certificate
    - field.storage.node.field_certificate_in_request
    - field.storage.node.field_count_approvers
    - field.storage.node.field_current_state_certificate
    - field.storage.node.field_days
    - field.storage.node.field_duration_example
    - field.storage.node.field_duration_not_paid_vacation
    - field.storage.node.field_duration_notpaid_in_hours
    - field.storage.node.field_duration_of_the_paid_vacat
    - field.storage.node.field_employee_sender
    - field.storage.node.field_limit_
    - field.storage.node.field_owner
    - field.storage.node.field_status_transactions
    - field.storage.node.field_type_paid_vacation
    - field.storage.node.field_vacat
    - node.type.transaction
    - node.type.vacation_request
    - views.view.current_certificate
  module:
    - eca_base
    - eca_content
    - eca_tamper
    - eca_user
    - eca_views
id: process_kldjmh4
modeller: bpmn_io
label: 'STEP 3: Duration vacation days, set field certificate in  request and create SPENT TRANSACTION after create vacation request'
version: ''
weight: -10
events:
  Event_1r3ba0r:
    plugin: 'content_entity:insert'
    label: 'create vacation request'
    configuration:
      type: 'node vacation_request'
    successors:
      -
        id: Activity_0c3pcf2
        condition: ''
  Event_02fjwm4:
    plugin: 'content_entity:custom'
    label: 'custom trigger x7'
    configuration:
      event_id: x7
    successors:
      -
        id: Activity_1nrq3i1
        condition: ''
  Event_1olhy4f:
    plugin: 'content_entity:custom'
    label: 'CUSTOM EVENT x11'
    configuration:
      event_id: x11
    successors:
      -
        id: Activity_0m9xzcz
        condition: ''
  Event_1kqpqhf:
    plugin: 'content_entity:custom'
    label: 'CUSTOM EVENT x12'
    configuration:
      event_id: x12
    successors:
      -
        id: Activity_0zpqcz6
        condition: ''
  Event_0n215o7:
    plugin: 'content_entity:custom'
    label: 'CUSTOM EVENT x13'
    configuration:
      event_id: x13
    successors:
      -
        id: Activity_1oyeew6
        condition: ''
  Event_1thedtq:
    plugin: 'content_entity:custom'
    label: 'CUSTOM EVENT x14'
    configuration:
      event_id: x14
    successors:
      -
        id: Activity_1xip64x
        condition: ''
  Event_04zixsq:
    plugin: 'content_entity:custom'
    label: 'CUSTOM EVENT x15'
    configuration:
      event_id: x15
    successors:
      -
        id: Activity_1nc4143
        condition: ''
conditions:
  Flow_1e735ru:
    plugin: eca_scalar
    configuration:
      case: false
      left: '[new_request:field_type_vacations:value]'
      right: '1'
      operator: equal
      type: value
      negate: true
  Flow_16dorsq:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[first_drop_certificate:field_limit_:value]'
      right: '[duration_paid_request]'
      operator: equal
      type: value
  Flow_1m21i3s:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[duration_paid_request]'
      right: '[first_drop_certificate:field_limit_:value]'
      operator: greaterthan
      type: value
  Flow_1c5vavt:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[first_drop_certificate:field_limit_:value]'
      right: '[duration_paid_request]'
      operator: greaterthan
      type: value
  Flow_0fzc6dv:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[second_dropped_certificate:field_limit_:value]'
      right: '[rounder_remaining_days_for_second_certificate]'
      operator: greaterthan
      type: value
  Flow_0cvaikt:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[rounder_remaining_days_for_second_certificate]'
      right: '[second_dropped_certificate:field_limit_:value]'
      operator: greaterthan
      type: value
  Flow_09a3tvo:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[second_dropped_certificate:field_limit_:value]'
      right: '[rounder_remaining_days_for_second_certificate]'
      operator: equal
      type: value
  Flow_0uncr2m:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[remaining_days]'
      right: '0'
      operator: greaterthan
      type: value
  Flow_0bi4rep:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[remaining_days]'
      right: '0'
      operator: equal
      type: value
  Flow_0i8qbm1:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[duration_paid_hours]'
      right: '23.983333333334'
      operator: lessthan
      type: value
  Flow_06n37ac:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[duration_paid_hours]'
      right: '24'
      operator: greaterthan
      type: value
  Flow_1enrajt:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[rounder_remaining]'
      right: '0'
      operator: greaterthan
      type: value
  Flow_0dbel6a:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[rounder_remaining]'
      right: '0'
      operator: equal
      type: value
gateways:
  Gateway_0l452un:
    type: 0
    successors:
      -
        id: Activity_17cjcqu
        condition: ''
      -
        id: Activity_0g2xxt5
        condition: Flow_1e735ru
  Gateway_1frlevo:
    type: 0
    successors:
      -
        id: Activity_0eblzq6
        condition: Flow_16dorsq
      -
        id: Activity_1tgwoss
        condition: Flow_1m21i3s
      -
        id: Activity_0eblzq6
        condition: Flow_1c5vavt
  Gateway_059fo18:
    type: 0
    successors:
      -
        id: Activity_0xflyho
        condition: Flow_0fzc6dv
      -
        id: Activity_134q4un
        condition: Flow_0cvaikt
      -
        id: Activity_0xflyho
        condition: Flow_09a3tvo
  Gateway_1wxzwfs:
    type: 0
    successors:
      -
        id: Activity_1tmwopm
        condition: Flow_0uncr2m
      -
        id: Activity_0ceq020
        condition: Flow_0bi4rep
  Gateway_1hjqibm:
    type: 0
    successors:
      -
        id: Activity_07o1gbc
        condition: Flow_0i8qbm1
      -
        id: Activity_0jx9xep
        condition: Flow_06n37ac
  Gateway_1akccvc:
    type: 0
    successors:
      -
        id: Activity_0tns4xu
        condition: Flow_1enrajt
      -
        id: Activity_18pyj8u
        condition: Flow_0dbel6a
actions:
  Activity_0c3pcf2:
    plugin: eca_token_load_entity
    label: 'load request'
    configuration:
      token_name: new_request
      from: current
      entity_type: node
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_07h79g6
        condition: ''
  Activity_0c4vplg:
    plugin: eca_switch_account
    label: 'switch user'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_1bf0vdg
        condition: ''
  Activity_17cjcqu:
    plugin: 'eca_tamper:math'
    label: 'duration timestamp paid vacation'
    configuration:
      operation: subtraction
      flip: false
      value: '[new_request:field_duration_example:value]'
      eca_data: '[new_request:field_duration_example:end_value]'
      eca_token_name: duration_timestamp_paid
    successors:
      -
        id: Activity_1pcd8e5
        condition: ''
  Activity_0g2xxt5:
    plugin: 'eca_tamper:math'
    label: 'duration timestamp not paid vacation'
    configuration:
      operation: subtraction
      flip: false
      value: '[new_request:field_duration_not_paid_vacation:value]'
      eca_data: '[new_request:field_duration_not_paid_vacation:end_value]'
      eca_token_name: duration_timestamp
    successors:
      -
        id: Activity_0qj364f
        condition: ''
  Activity_0qj364f:
    plugin: 'eca_tamper:math'
    label: 'duration in hours'
    configuration:
      operation: division
      flip: false
      value: '3600'
      eca_data: '[duration_timestamp]'
      eca_token_name: duration_in_hours
    successors:
      -
        id: Activity_056gn5r
        condition: ''
  Activity_056gn5r:
    plugin: eca_set_field_value
    label: 'set field Duration in hours'
    configuration:
      field_name: field_duration_notpaid_in_hours
      field_value: '[duration_in_hours]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_17pfgmw
        condition: ''
  Activity_15fq56m:
    plugin: eca_set_field_value
    label: 'set field Duration in days'
    configuration:
      field_name: field_duration_of_the_paid_vacat
      field_value: '[rounder_duration_paid_days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_16e4qx7
        condition: ''
  Activity_1d8s2ql:
    plugin: eca_count
    label: 'count voters'
    configuration:
      token_name: count_voters
      list_token: voters
    successors:
      -
        id: Activity_0gmj97a
        condition: ''
  Activity_0gmj97a:
    plugin: eca_set_field_value
    label: count_approvers
    configuration:
      field_name: field_count_approvers
      field_value: '[count_voters]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_18k7wr2
        condition: ''
  Activity_1bf0vdg:
    plugin: eca_token_set_value
    label: 'set token Voters'
    configuration:
      token_name: voters
      token_value: '[new_request:field_approver]'
      use_yaml: false
    successors:
      -
        id: Activity_01w80iu
        condition: ''
  Activity_17pfgmw:
    plugin: eca_save_entity
    label: 'save entity'
    configuration:
      object: '[new_request]'
    successors:
      -
        id: Activity_1pd9yba
        condition: ''
  Activity_10aaj18:
    plugin: eca_switch_account
    label: 'switch to sender'
    configuration:
      user_id: '[sender]'
    successors:
      -
        id: Activity_1fv3ad3
        condition: ''
  Activity_07h79g6:
    plugin: eca_token_load_entity
    label: 'load entity sender'
    configuration:
      token_name: sender
      from: id
      entity_type: user
      entity_id: '[new_request:author:uid]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: '[new_request]'
    successors:
      -
        id: Activity_0c4vplg
        condition: ''
  Activity_1fv3ad3:
    plugin: eca_views_query
    label: 'view "All current certificate sender"'
    configuration:
      token_name: list_current_certificate
      view_id: current_certificate
      display_id: block_3
      arguments: '[sender]'
    successors:
      -
        id: Activity_0xlaf01
        condition: ''
  Activity_18k7wr2:
    plugin: eca_token_set_value
    label: 'token all certificate'
    configuration:
      token_name: list_certificate_request
      token_value: '[new_request:field_certificate_in_request]'
      use_yaml: false
    successors:
      -
        id: Gateway_0l452un
        condition: ''
  Activity_0xlaf01:
    plugin: eca_list_remove
    label: 'remove item'
    configuration:
      value: ''
      token_name: first_drop_certificate
      method: first
      index: ''
      list_token: list_current_certificate
    successors:
      -
        id: Activity_1banpst
        condition: ''
  Activity_0eblzq6:
    plugin: 'eca_tamper:math'
    label: 'limit_first_days - duration_request'
    configuration:
      operation: subtraction
      flip: false
      value: '[duration_paid_request]'
      eca_data: '[first_drop_certificate:field_limit_:value]'
      eca_token_name: remaining_days
    successors:
      -
        id: Activity_1lb2yo5
        condition: ''
  Activity_06niuw8:
    plugin: 'eca_tamper:math'
    label: "duration_days\_ -\_ limit_first_certificate"
    configuration:
      operation: subtraction
      flip: false
      value: '[first_drop_certificate:field_limit_:value]'
      eca_data: '[duration_paid_request]'
      eca_token_name: remaining_days_for_second_certificate
    successors:
      -
        id: Activity_0hk0ym7
        condition: ''
  Activity_0e3u8dd:
    plugin: eca_set_field_value
    label: 'set field Limit day in first certificate'
    configuration:
      field_name: field_limit_
      field_value: '[remaining_days]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[first_drop_certificate]'
    successors:
      -
        id: Activity_0n462po
        condition: ''
      -
        id: Gateway_1wxzwfs
        condition: ''
  Activity_1tmwopm:
    plugin: eca_save_entity
    label: 'save first certificate entity'
    configuration:
      object: '[first_drop_certificate]'
    successors:
      -
        id: Activity_0yqw8hq
        condition: ''
  Activity_0n462po:
    plugin: eca_list_add
    label: 'add new item to list all certificate in request'
    configuration:
      value: '[first_drop_certificate]'
      method: append
      index: ''
      list_token: list_certificate_request
    successors:
      -
        id: Activity_1lz8o6n
        condition: ''
  Activity_1lz8o6n:
    plugin: eca_set_field_value
    label: 'set field Certificate in Vacation request'
    configuration:
      field_name: field_certificate_in_request
      field_value: '[list_certificate_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_0ytf55c
        condition: ''
  Activity_0ytf55c:
    plugin: eca_save_entity
    label: 'save entity request'
    configuration:
      object: '[new_request]'
    successors: {  }
  Activity_0f9bjko:
    plugin: eca_set_field_value
    label: 'set field Limit day 0 in first certificate'
    configuration:
      field_name: field_limit_
      field_value: '0'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[first_drop_certificate]'
    successors:
      -
        id: Activity_119c85b
        condition: ''
      -
        id: Activity_0j8fli1
        condition: ''
  Activity_119c85b:
    plugin: eca_list_add
    label: 'add new item to list all certificate in request'
    configuration:
      value: '[first_drop_certificate]'
      method: append
      index: ''
      list_token: list_certificate_request
    successors:
      -
        id: Activity_0hjs10x
        condition: ''
  Activity_0hjs10x:
    plugin: eca_list_remove
    label: 'remove second certificate'
    configuration:
      value: ''
      token_name: second_dropped_certificate
      method: index
      index: '[1]'
      list_token: list_current_certificate
    successors:
      -
        id: Activity_12zo1kt
        condition: ''
  Activity_0bn22yi:
    plugin: eca_save_entity
    label: 'save first_certificate'
    configuration:
      object: '[first_drop_certificate]'
    successors:
      -
        id: Activity_1qo6r68
        condition: ''
  Activity_0xflyho:
    plugin: 'eca_tamper:math'
    label: 'second_certificate_days - remaining_day'
    configuration:
      operation: subtraction
      flip: false
      value: '[rounder_remaining_days_for_second_certificate]'
      eca_data: '[second_dropped_certificate:field_limit_:value]'
      eca_token_name: remaining
    successors:
      -
        id: Activity_1spikfu
        condition: ''
  Activity_1lc9uqs:
    plugin: eca_set_field_value
    label: 'set field limit vacation days in second certificate'
    configuration:
      field_name: field_limit_
      field_value: '[rounder_remaining]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[second_dropped_certificate]'
    successors:
      -
        id: Activity_01mqdkj
        condition: ''
  Activity_0tns4xu:
    plugin: eca_save_entity
    label: 'save entity second certificate'
    configuration:
      object: '[second_dropped_certificate]'
    successors:
      -
        id: Activity_0sx47j9
        condition: ''
  Activity_01mqdkj:
    plugin: eca_list_add
    label: 'add second certificate to list'
    configuration:
      value: '[second_dropped_certificate]'
      method: append
      index: ''
      list_token: list_certificate_request
    successors:
      -
        id: Activity_1imobjk
        condition: ''
  Activity_1imobjk:
    plugin: eca_set_field_value
    label: 'set field  2 Certificate in Vacation request'
    configuration:
      field_name: field_certificate_in_request
      field_value: '[list_certificate_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_0dzdlxa
        condition: ''
  Activity_0dzdlxa:
    plugin: eca_save_entity
    label: 'save entity request'
    configuration:
      object: '[new_request]'
    successors: {  }
  Activity_1lb2yo5:
    plugin: eca_switch_account
    label: 'switch to admin'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_0e3u8dd
        condition: ''
  Activity_1tgwoss:
    plugin: eca_switch_account
    label: 'switch to admin'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_06niuw8
        condition: ''
  Activity_134q4un:
    plugin: 'eca_tamper:math'
    label: 'remaining_days - second_certificate_days'
    configuration:
      operation: subtraction
      flip: false
      value: '[second_dropped_certificate:field_limit_:value]'
      eca_data: '[rounder_remaining_days_for_second_certificate]'
      eca_token_name: remaining_day_for_third_certificate
    successors:
      -
        id: Activity_1i5aapl
        condition: ''
  Activity_01cc11b:
    plugin: eca_set_field_value
    label: 'set field Limit for second certificate'
    configuration:
      field_name: field_limit_
      field_value: '0'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[second_dropped_certificate]'
    successors:
      -
        id: Activity_011squi
        condition: ''
      -
        id: Activity_0c96lpz
        condition: ''
  Activity_018thxw:
    plugin: eca_save_entity
    label: 'save second certificate entity'
    configuration:
      object: '[second_dropped_certificate]'
    successors:
      -
        id: Activity_005ek6b
        condition: ''
  Activity_011squi:
    plugin: eca_list_add
    label: 'add second_certificate to list all certificate'
    configuration:
      value: '[second_dropped_certificate]'
      method: append
      index: ''
      list_token: list_certificate_request
    successors:
      -
        id: Activity_0l4bxkj
        condition: ''
  Activity_0l4bxkj:
    plugin: eca_list_remove
    label: 'remove third certififcate'
    configuration:
      value: ''
      token_name: third_certificate
      method: index
      index: '[2]'
      list_token: list_current_certificate
    successors:
      -
        id: Activity_0154mh3
        condition: ''
  Activity_0154mh3:
    plugin: 'eca_tamper:math'
    label: MATH
    configuration:
      operation: subtraction
      flip: false
      value: '[rounder_remaining_day_for_third_certificate]'
      eca_data: '[third_certificate:field_limit_:value]'
      eca_token_name: remaining_day_in_third_certificate
    successors:
      -
        id: Activity_16vb82c
        condition: ''
  Activity_1mq6vec:
    plugin: eca_set_field_value
    label: 'set field Limit for third certificate'
    configuration:
      field_name: field_limit_
      field_value: '[rounder_remaining_day_in_third_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[third_certificate]'
    successors:
      -
        id: Activity_1hlv9xi
        condition: ''
      -
        id: Activity_0w7ivk7
        condition: ''
  Activity_0w7ivk7:
    plugin: eca_save_entity
    label: 'save third certificate'
    configuration:
      object: '[third_certificate]'
    successors:
      -
        id: Activity_17sgn1w
        condition: ''
  Activity_1hlv9xi:
    plugin: eca_list_add
    label: 'add third certificate to list all certificate'
    configuration:
      value: '[third_certificate]'
      method: append
      index: ''
      list_token: list_certificate_request
    successors:
      -
        id: Activity_0t95sv5
        condition: ''
  Activity_0t95sv5:
    plugin: eca_set_field_value
    label: 'set field Certificate list'
    configuration:
      field_name: field_certificate_in_request
      field_value: '[list_certificate_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[new_request]'
    successors:
      -
        id: Activity_1507pi4
        condition: ''
  Activity_1507pi4:
    plugin: eca_save_entity
    label: 'save request'
    configuration:
      object: '[new_request]'
    successors: {  }
  Activity_1pd9yba:
    plugin: eca_trigger_content_entity_custom_event
    label: 'TRIGGER NOT PAID'
    configuration:
      event_id: x7
      tokens: 'sender,new_request'
      object: '[new_request]'
    successors: {  }
  Activity_12yrr4s:
    plugin: eca_new_entity
    label: 'CREATE SPENT TRANSACTION'
    configuration:
      token_name: not_paid_vacation_transaction
      type: 'node transaction'
      langcode: ''
      label: 'Spent transaction to not paid "[new_request:title]"'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_172me4r
        condition: ''
  Activity_1nrq3i1:
    plugin: eca_switch_account
    label: 'SWITCH TO ADMIN'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_12yrr4s
        condition: ''
  Activity_172me4r:
    plugin: eca_set_field_value
    label: 'SET FIELD OWNER'
    configuration:
      field_name: field_owner
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[not_paid_vacation_transaction]'
    successors:
      -
        id: Activity_1vloj4i
        condition: ''
  Activity_1vloj4i:
    plugin: eca_set_field_value
    label: 'SET FIELD VACATION REQUEST'
    configuration:
      field_name: field_vacat
      field_value: '[new_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[not_paid_vacation_transaction]'
    successors:
      -
        id: Activity_0bw5njs
        condition: ''
  Activity_0bw5njs:
    plugin: eca_set_field_value
    label: 'SET FIELD TYPE TRANSACTION'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[not_paid_vacation_transaction]'
    successors:
      -
        id: Activity_1b67sl0
        condition: ''
  Activity_0d0usta:
    plugin: eca_set_field_value
    label: 'SET FIELD NOT PAID'
    configuration:
      field_name: field_type_paid_vacation
      field_value: 'Not paid'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[not_paid_vacation_transaction]'
    successors:
      -
        id: Activity_0mlhfyy
        condition: ''
  Activity_0mlhfyy:
    plugin: eca_save_entity
    label: 'SAVE ENTITY'
    configuration:
      object: '[not_paid_vacation_transaction]'
    successors: {  }
  Activity_0m9xzcz:
    plugin: eca_switch_account
    label: 'SWITCH TO ADMIN'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_16ijd9f
        condition: ''
  Activity_16ijd9f:
    plugin: eca_new_entity
    label: 'CREATE SPENT TRANSACTION'
    configuration:
      token_name: paid_vacation_transaction
      type: 'node transaction'
      langcode: ''
      label: 'Transaction of subtracting days from a certificate "[first_drop_certificate:title]"'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_1mojayb
        condition: ''
  Activity_1mojayb:
    plugin: eca_set_field_value
    label: 'SET FIELD OWNER'
    configuration:
      field_name: field_owner
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_11ecq79
        condition: ''
  Activity_11ecq79:
    plugin: eca_set_field_value
    label: 'SET FIELD VACATION REQUEST'
    configuration:
      field_name: field_vacat
      field_value: '[new_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_1k02l15
        condition: ''
  Activity_0ykdujq:
    plugin: eca_set_field_value
    label: 'SET FIELD SPENT TYPE'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_1ddadi3
        condition: ''
  Activity_1ddadi3:
    plugin: eca_set_field_value
    label: 'SET FIELD PAID REQUEST'
    configuration:
      field_name: field_type_paid_vacation
      field_value: Paid
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_0sllx13
        condition: ''
  Activity_0sllx13:
    plugin: eca_set_field_value
    label: 'SET FIELD DAYS'
    configuration:
      field_name: field_days
      field_value: '[duration_paid_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_0ytmrqs
        condition: ''
  Activity_0ytmrqs:
    plugin: eca_save_entity
    label: 'SAVE PAID TRANSACTION'
    configuration:
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_14my319
        condition: ''
  Activity_01w80iu:
    plugin: eca_set_field_value
    label: 'SET FIELD SENDER'
    configuration:
      field_name: field_employee_sender
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_1d8s2ql
        condition: ''
  Activity_1b67sl0:
    plugin: eca_set_field_value
    label: 'SET FIELD DAYS'
    configuration:
      field_name: field_days
      field_value: '[new_request:field_duration_notpaid_in_hours:value]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[not_paid_vacation_transaction]'
    successors:
      -
        id: Activity_0d0usta
        condition: ''
  Activity_0j8fli1:
    plugin: eca_set_field_value
    label: 'SET STATE EMPTY'
    configuration:
      field_name: field_current_state_certificate
      field_value: state_certificate_empty
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[first_drop_certificate]'
    successors:
      -
        id: Activity_0bn22yi
        condition: ''
  Activity_0c96lpz:
    plugin: eca_set_field_value
    label: 'SET STATE EMPTY'
    configuration:
      field_name: field_current_state_certificate
      field_value: state_certificate_empty
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[second_dropped_certificate]'
    successors:
      -
        id: Activity_018thxw
        condition: ''
  Activity_17sgn1w:
    plugin: eca_trigger_content_entity_custom_event
    label: 'TRIGGER x15'
    configuration:
      event_id: x10
      tokens: 'sender,new_request,third_certificate,rounder_remaining_day_for_third_certificate'
      object: '[third_certificate]'
    successors: {  }
  Activity_0ceq020:
    plugin: eca_set_field_value
    label: 'SET STATE EMPTY'
    configuration:
      field_name: field_current_state_certificate
      field_value: state_certificate_empty
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[first_drop_certificate]'
    successors:
      -
        id: Activity_1tmwopm
        condition: ''
  Activity_1pcd8e5:
    plugin: 'eca_tamper:math'
    label: 'duration in hours'
    configuration:
      operation: division
      flip: false
      value: '3600'
      eca_data: '[duration_timestamp_paid]'
      eca_token_name: duration_paid_hours
    successors:
      -
        id: Activity_0gpbmhl
        condition: ''
  Activity_0gpbmhl:
    plugin: 'eca_tamper:math'
    label: 'duration in days'
    configuration:
      operation: division
      flip: false
      value: '24'
      eca_data: '[duration_paid_hours]'
      eca_token_name: duration_paid_days
    successors:
      -
        id: Gateway_1hjqibm
        condition: ''
  Activity_07o1gbc:
    plugin: eca_set_field_value
    label: 'set field Duration 1 day'
    configuration:
      field_name: field_duration_of_the_paid_vacat
      field_value: '1'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[new_request]'
    successors:
      -
        id: Activity_16e4qx7
        condition: ''
  Activity_0jx9xep:
    plugin: 'eca_tamper:math'
    label: 'Rounder number'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '[duration_paid_days]'
      eca_token_name: rounder_duration_paid_days
    successors:
      -
        id: Activity_15fq56m
        condition: ''
  Activity_16e4qx7:
    plugin: eca_token_set_value
    label: 'set token duration paid request'
    configuration:
      token_name: duration_paid_request
      token_value: '[new_request:field_duration_of_the_paid_vacat:value]'
      use_yaml: false
    successors:
      -
        id: Activity_10aaj18
        condition: ''
  Activity_0hk0ym7:
    plugin: 'eca_tamper:math'
    label: 'ROUNDER REMAINING DAYS FOR SECOND CERTIFICATE'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '[remaining_days_for_second_certificate]'
      eca_token_name: '[rounder_remaining_days_for_second_certificate]'
    successors:
      -
        id: Activity_0f9bjko
        condition: ''
  Activity_1spikfu:
    plugin: 'eca_tamper:math'
    label: 'ROUNDER REMAINING'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '[remaining]'
      eca_token_name: rounder_remaining
    successors:
      -
        id: Activity_1lc9uqs
        condition: ''
      -
        id: Gateway_1akccvc
        condition: ''
  Activity_18pyj8u:
    plugin: eca_set_field_value
    label: 'SET VALUE EMPTY'
    configuration:
      field_name: field_current_state_certificate
      field_value: state_certificate_empty
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[second_dropped_certificate]'
    successors:
      -
        id: Activity_0tns4xu
        condition: ''
  Activity_1i5aapl:
    plugin: 'eca_tamper:math'
    label: 'ROUNDER REMAINING DAYS FOR THIRD CERTIFICATE'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '[remaining_day_for_third_certificate]'
      eca_token_name: '[rounder_remaining_day_for_third_certificate]'
    successors:
      -
        id: Activity_01cc11b
        condition: ''
  Activity_16vb82c:
    plugin: 'eca_tamper:math'
    label: 'ROUNDER REMAINING DAYS IN 1 CERTIFICATE'
    configuration:
      operation: addition
      flip: false
      value: '1'
      eca_data: '[remaining_day_in_third_certificate]'
      eca_token_name: '[rounder_remaining_day_in_third_certificate]'
    successors:
      -
        id: Activity_1mq6vec
        condition: ''
  Activity_0yqw8hq:
    plugin: eca_trigger_content_entity_custom_event
    label: 'TRIGGER x11'
    configuration:
      event_id: x11
      tokens: 'first_drop_certificate,sender,new_request,unchanged_limit_first_certificate,duration_paid_request'
      object: '[first_drop_certificate]'
    successors: {  }
  Activity_1qo6r68:
    plugin: eca_trigger_content_entity_custom_event
    label: 'TRIGGER X12'
    configuration:
      event_id: x12
      tokens: 'first_drop_certificate,sender,new_request,unchanged_limit_first_certificate'
      object: '[first_drop_certificate]'
    successors: {  }
  Activity_0sx47j9:
    plugin: eca_trigger_content_entity_custom_event
    label: 'TRIGGER x13'
    configuration:
      event_id: x13
      tokens: 'second_dropped_certificate,sender,new_request,rounder_remaining_days_for_second_certificate'
      object: '[second_dropped_certificate]'
    successors: {  }
  Activity_005ek6b:
    plugin: eca_trigger_content_entity_custom_event
    label: 'TRIGGER x14'
    configuration:
      event_id: x14
      tokens: 'second_dropped_certificate,sender,new_request,unchanged_limit_second_certificate'
      object: '[second_dropped_certificate]'
    successors: {  }
  Activity_1banpst:
    plugin: eca_token_set_value
    label: 'SET TOKEN VALUE UNCHANGED LIMIT 1 CERTIFICATE'
    configuration:
      token_name: unchanged_limit_first_certificate
      token_value: '[first_drop_certificate:field_limit_:value]'
      use_yaml: false
    successors:
      -
        id: Gateway_1frlevo
        condition: ''
      -
        id: Activity_0u9vayc
        condition: ''
  Activity_0u9vayc:
    plugin: action_message_action
    label: Activity_0u9vayc
    configuration:
      replace_tokens: false
      message: 'незмінена кількість днів в сертифікаті:[unchanged_limit_first_certificate]'
    successors: {  }
  Activity_1k02l15:
    plugin: eca_set_field_value
    label: 'SET FIELD CERTIFICATE'
    configuration:
      field_name: field_certificate
      field_value: '[first_drop_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[paid_vacation_transaction]'
    successors:
      -
        id: Activity_0ykdujq
        condition: ''
  Activity_0zpqcz6:
    plugin: eca_switch_account
    label: 'SWITCH TO ADMIN'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_1a9fkht
        condition: ''
  Activity_1a9fkht:
    plugin: eca_new_entity
    label: 'CREATE SPENT TRANSACTION'
    configuration:
      token_name: transactions_spent_from_first_certificate
      type: 'node transaction'
      langcode: ''
      label: 'Transaction of subtracting days from a certificate "[first_drop_certificate:title]"'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_0idqtd2
        condition: ''
  Activity_0idqtd2:
    plugin: eca_set_field_value
    label: 'SET FIELD OWNER'
    configuration:
      field_name: field_owner
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_1xsqyvi
        condition: ''
  Activity_1xsqyvi:
    plugin: eca_set_field_value
    label: 'SET FIELD REQUEST'
    configuration:
      field_name: field_vacat
      field_value: '[new_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_1wlzmxk
        condition: ''
  Activity_1wlzmxk:
    plugin: eca_set_field_value
    label: 'SET FIELD CERTIFICATE'
    configuration:
      field_name: field_certificate
      field_value: '[first_drop_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_1ho302u
        condition: ''
  Activity_1ho302u:
    plugin: eca_set_field_value
    label: 'SET FIELD SPENT TYPE'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_17a5nt3
        condition: ''
  Activity_17a5nt3:
    plugin: eca_set_field_value
    label: 'SET FIELD PAID'
    configuration:
      field_name: field_type_paid_vacation
      field_value: Paid
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_08a2fs6
        condition: ''
  Activity_08a2fs6:
    plugin: eca_set_field_value
    label: 'SET FIELD DAYS'
    configuration:
      field_name: field_days
      field_value: '[unchanged_limit_first_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_17wb8z6
        condition: ''
  Activity_17wb8z6:
    plugin: eca_save_entity
    label: 'SAVE TRANSACTION'
    configuration:
      object: '[transactions_spent_from_first_certificate]'
    successors:
      -
        id: Activity_01p7z8x
        condition: ''
  Activity_1oyeew6:
    plugin: eca_switch_account
    label: 'SWITCH TO ADMIN'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_062boe8
        condition: ''
  Activity_062boe8:
    plugin: eca_new_entity
    label: 'CREATE TRANSACTION'
    configuration:
      token_name: tran_spent_from_second_certificate
      type: 'node transaction'
      langcode: ''
      label: 'Transaction of subtracting days from a certificate "[second_dropped_certificate:title]"'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_0lyaoyj
        condition: ''
  Activity_0lyaoyj:
    plugin: eca_set_field_value
    label: 'SET FIELD OWNER'
    configuration:
      field_name: field_owner
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_0nhlxd7
        condition: ''
  Activity_0nhlxd7:
    plugin: eca_set_field_value
    label: 'SET FIELD REQUEST'
    configuration:
      field_name: field_vacat
      field_value: '[new_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_16x65gf
        condition: ''
  Activity_16x65gf:
    plugin: eca_set_field_value
    label: 'SET FIELD CERTIFICATE'
    configuration:
      field_name: field_certificate
      field_value: '[second_dropped_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_1ty2rc5
        condition: ''
  Activity_12zo1kt:
    plugin: eca_token_set_value
    label: 'SET TOKEN VALUE UNCHANGED LIMIT 2 CERTIFICATE'
    configuration:
      token_name: unchanged_limit_second_certificate
      token_value: '[second_dropped_certificate:field_limit_:value]'
      use_yaml: false
    successors:
      -
        id: Gateway_059fo18
        condition: ''
  Activity_1ty2rc5:
    plugin: eca_set_field_value
    label: 'SET FIELD SPENT TYPE'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_04bxbv5
        condition: ''
  Activity_04bxbv5:
    plugin: eca_set_field_value
    label: 'SET FIELD PAID'
    configuration:
      field_name: field_type_paid_vacation
      field_value: Paid
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_1snt71h
        condition: ''
  Activity_1snt71h:
    plugin: eca_set_field_value
    label: 'SET FIELD DAYS'
    configuration:
      field_name: field_days
      field_value: '[rounder_remaining_days_for_second_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_0q2cu21
        condition: ''
  Activity_0q2cu21:
    plugin: eca_save_entity
    label: 'SAVE TRANSACTION'
    configuration:
      object: '[tran_spent_from_second_certificate]'
    successors:
      -
        id: Activity_0zb9bh2
        condition: ''
  Activity_1xip64x:
    plugin: eca_switch_account
    label: 'SWITCH TO ADMIN'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_1eu14us
        condition: ''
  Activity_1eu14us:
    plugin: eca_new_entity
    label: 'CREATE TRANSACTION'
    configuration:
      token_name: transaction_empty_certificate
      type: 'node transaction'
      langcode: ''
      label: 'Transaction of subtracting days from a certificate "[second_dropped_certificate:title]"'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_0gw321o
        condition: ''
  Activity_0gw321o:
    plugin: eca_set_field_value
    label: 'SET FIELD OWNER'
    configuration:
      field_name: field_owner
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_19az5f6
        condition: ''
  Activity_19az5f6:
    plugin: eca_set_field_value
    label: 'SET FIELD REQUEST'
    configuration:
      field_name: field_vacat
      field_value: '[new_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_04j1ck9
        condition: ''
  Activity_04j1ck9:
    plugin: eca_set_field_value
    label: 'SET FIELD SPENT TYPE'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_0o61dlf
        condition: ''
  Activity_0o61dlf:
    plugin: eca_set_field_value
    label: 'SET FIELD PAID'
    configuration:
      field_name: field_type_paid_vacation
      field_value: Paid
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_0vtauvf
        condition: ''
  Activity_0vtauvf:
    plugin: eca_set_field_value
    label: 'SET FIELD DAYS'
    configuration:
      field_name: field_days
      field_value: '[unchanged_limit_second_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_0pvdlm8
        condition: ''
  Activity_0pvdlm8:
    plugin: eca_set_field_value
    label: 'SET FIELD CERTIFICATE'
    configuration:
      field_name: field_certificate
      field_value: '[second_dropped_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_06zxlsc
        condition: ''
  Activity_06zxlsc:
    plugin: eca_save_entity
    label: 'SAVE TRANSACTION'
    configuration:
      object: '[transaction_empty_certificate]'
    successors: {  }
  Activity_1nc4143:
    plugin: eca_switch_account
    label: 'SWITCH TO ADMIN'
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_0510vlx
        condition: ''
  Activity_0510vlx:
    plugin: eca_new_entity
    label: 'CREATE TRANSACTION'
    configuration:
      token_name: transaction_third_certificate
      type: 'node transaction'
      langcode: ''
      label: 'Transaction of subtracting days from a certificate "[third_certificate:title]"'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_1905v1l
        condition: ''
  Activity_1905v1l:
    plugin: eca_set_field_value
    label: 'SET FIELD OWNER'
    configuration:
      field_name: field_owner
      field_value: '[sender]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_third_certificate]'
    successors:
      -
        id: Activity_0iwj3b4
        condition: ''
  Activity_0iwj3b4:
    plugin: eca_set_field_value
    label: 'SET FIELD REQUEST'
    configuration:
      field_name: field_vacat
      field_value: '[new_request]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_third_certificate]'
    successors:
      -
        id: Activity_17nu1t4
        condition: ''
  Activity_17nu1t4:
    plugin: eca_set_field_value
    label: 'SET FIELD SPENT TYPE'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_third_certificate]'
    successors:
      -
        id: Activity_1gskzx3
        condition: ''
  Activity_1gskzx3:
    plugin: eca_set_field_value
    label: 'SET FIELD PAID'
    configuration:
      field_name: field_type_paid_vacation
      field_value: Paid
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[transaction_empty_certificate]'
    successors:
      -
        id: Activity_0z5l6pq
        condition: ''
  Activity_0z5l6pq:
    plugin: eca_set_field_value
    label: 'SET FIELD DAYS'
    configuration:
      field_name: field_days
      field_value: '[rounder_remaining_day_for_third_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_third_certificate]'
    successors:
      -
        id: Activity_1ouz11k
        condition: ''
  Activity_1ouz11k:
    plugin: eca_set_field_value
    label: 'SET FIELD CERTIFICATE'
    configuration:
      field_name: field_certificate
      field_value: '[third_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: true
      object: '[transaction_third_certificate]'
    successors:
      -
        id: Activity_11zggmx
        condition: ''
  Activity_11zggmx:
    plugin: eca_save_entity
    label: 'SAVE TRANSACTION'
    configuration:
      object: '[transaction_third_certificate]'
    successors: {  }
  Activity_01p7z8x:
    plugin: action_message_action
    label: MESSAGE
    configuration:
      replace_tokens: false
      message: '2) транзакція на перший сертифікат.який згорає повністю [duration_paid_request] [unchanged_limit_first_certificate]'
    successors: {  }
  Activity_14my319:
    plugin: action_message_action
    label: Activity_14my319
    configuration:
      replace_tokens: false
      message: '1) транзакція на сертифікат.який один в реквесті і його кількість днів =[duration_paid_request]'
    successors: {  }
  Activity_0zb9bh2:
    plugin: action_message_action
    label: Activity_0zb9bh2
    configuration:
      replace_tokens: false
      message: '3) транзакція на другий сертифікат.який мінусує декілька днів з сертифіката [rounder_remaining_days_for_second_certificate]'
    successors: {  }
