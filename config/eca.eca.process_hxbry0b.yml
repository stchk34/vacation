uuid: 9134ff5d-cec3-48cd-a465-ccfc0e3f88f3
langcode: en
status: true
dependencies:
  config:
    - views.view.vacation_request
  module:
    - eca_base
    - eca_user
    - eca_views
id: process_hxbry0b
modeller: bpmn_io
label: 'Send email all approvers about NEW vacation request'
version: ''
weight: -10
events:
  Event_0s5dxti:
    plugin: 'eca_base:eca_cron'
    label: Event_0s5dxti
    configuration:
      frequency: '*/2 * * * *'
    successors:
      -
        id: Activity_0qtjik8
        condition: ''
conditions:
  Flow_0fvwu3x:
    plugin: eca_count
    configuration:
      negate: false
      case: false
      left: all_vacation_request
      right: '0'
      operator: greaterthan
      type: numeric
gateways:
  Gateway_06mvfal:
    type: 0
    successors:
      -
        id: Activity_0ky7haj
        condition: Flow_0fvwu3x
actions:
  Activity_0qtjik8:
    plugin: eca_switch_account
    label: switch
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_1ucxtap
        condition: ''
  Activity_1ucxtap:
    plugin: eca_views_query
    label: 'view "Vacation request"'
    configuration:
      token_name: all_vacation_request
      view_id: vacation_request
      display_id: block_1
      arguments: ''
    successors:
      -
        id: Gateway_06mvfal
        condition: ''
  Activity_0ky7haj:
    plugin: eca_list_remove
    label: remove
    configuration:
      value: ''
      token_name: approver
      method: first
      index: ''
      list_token: all_vacation_request
    successors:
      -
        id: Activity_0q88m22
        condition: ''
  Activity_0q88m22:
    plugin: action_send_email_action
    label: Activity_0q88m22
    configuration:
      replace_tokens: false
      recipient: '[approver:mail]'
      subject: 'Request for Approval of New Vacation Request'
      message: |-
        Dear [approver:account-name],
        I hope this message finds you well. I am writing to inform you that there is a new vacation request that requires your approval.
        Please log in to the Vacation system or follow the link provided to review and approve or deny the vacation request: [site:url]/all-vacation-request
    successors:
      -
        id: Gateway_06mvfal
        condition: ''
