uuid: 3364c06e-b665-4b72-a3be-86ef3eeef707
langcode: en
status: false
dependencies: {  }
id: subtracting_days_in_the_certificate_after_approved
label: 'Subtracting days in the certificate after Approved'
events:
  -
    event_name: 'rules_entity_update:node--vacation_request'
description: ''
tags: {  }
config_version: '3'
expression:
  id: rules_rule
  uuid: 2db73338-b542-4c2b-98cf-33204f7f9b09
  weight: 0
  conditions:
    id: rules_and
    uuid: 504f8301-9901-4375-8345-9f17f391b7a0
    weight: 0
    conditions:
      -
        id: rules_condition
        uuid: 97b8caa8-ddf5-4026-85a4-84e45c49b85e
        weight: -50
        condition_id: rules_entity_is_of_bundle
        negate: false
        context_values:
          type: node
          bundle: vacation_request
        context_mapping:
          entity: node_unchanged
        context_processors:
          type:
            rules_tokens: {  }
          bundle:
            rules_tokens: {  }
        provides_mapping: {  }
      -
        id: rules_condition
        uuid: f8776c44-c2be-47f5-9839-6a8dec6c4ce8
        weight: -49
        condition_id: rules_entity_is_of_bundle
        negate: false
        context_values:
          type: node
          bundle: vacation_request
        context_mapping:
          entity: node
        context_processors:
          type:
            rules_tokens: {  }
          bundle:
            rules_tokens: {  }
        provides_mapping: {  }
      -
        id: rules_condition
        uuid: 27ece630-d6bd-4ea4-8015-a394f17a54a2
        weight: -48
        condition_id: rules_entity_is_of_bundle
        negate: false
        context_values:
          type: user
          bundle: user
        context_mapping:
          entity: node_unchanged.uid.entity
        context_processors:
          type:
            rules_tokens: {  }
          bundle:
            rules_tokens: {  }
        provides_mapping: {  }
      -
        id: rules_condition
        uuid: c577feda-4d92-4fbf-be0b-72554d63780c
        weight: -47
        condition_id: rules_entity_is_of_bundle
        negate: false
        context_values:
          type: user
          bundle: user
        context_mapping:
          entity: node.uid.entity
        context_processors:
          type:
            rules_tokens: {  }
          bundle:
            rules_tokens: {  }
        provides_mapping: {  }
  actions:
    id: rules_action_set
    uuid: 811f975f-775b-44ed-b15c-0bf7df4e4f75
    weight: 0
    actions:
      -
        id: rules_action
        uuid: e1b60e45-3c31-455a-b2d0-2525634811a2
        weight: -50
        action_id: rules_data_convert
        context_values:
          target_type: integer
          rounding_behavior: ''
        context_mapping:
          value: node_unchanged.field_date_.duration
        context_processors:
          target_type:
            rules_tokens: {  }
          rounding_behavior:
            rules_tokens: {  }
        provides_mapping:
          conversion_result: conversion_result_duration
      -
        id: rules_action
        uuid: 5dd90afe-7f9d-4a2a-8353-0d983a0d55ce
        weight: -49
        action_id: rules_data_calculate_value
        context_values:
          input_1: '{{conversion_result_duration}}'
          operator: /
          input_2: '1440'
        context_mapping: {  }
        context_processors:
          input_1:
            rules_tokens: {  }
          operator:
            rules_tokens: {  }
          input_2:
            rules_tokens: {  }
        provides_mapping:
          result: result_duration_day
      -
        id: rules_action
        uuid: 69cf79f5-55c0-473a-a314-6db3e4c80a61
        weight: -48
        action_id: rules_data_convert
        context_values:
          target_type: integer
          rounding_behavior: ''
        context_mapping:
          value: result_duration_day
        context_processors:
          target_type:
            rules_tokens: {  }
          rounding_behavior:
            rules_tokens: {  }
        provides_mapping:
          conversion_result: conversion_result_in_day
      -
        id: rules_action
        uuid: 2909e897-14f9-4251-89f5-c040a1cdf453
        weight: -47
        action_id: rules_data_calculate_value
        context_values:
          input_1: '{{conversion_result_in_day}}'
          operator: /
          input_2: '6'
        context_mapping: {  }
        context_processors:
          input_1:
            rules_tokens: {  }
          operator:
            rules_tokens: {  }
          input_2:
            rules_tokens: {  }
        provides_mapping:
          result: correct_value
      -
        id: rules_action
        uuid: 5125d650-25e9-4ebf-94d3-cd60bc07fd56
        weight: -46
        action_id: rules_data_calculate_value
        context_values:
          input_1: '{{node_unchanged.uid.entity.field_balance_a_vacations_day.value}}'
          operator: '-'
          input_2: '{{correct_value}}'
        context_mapping: {  }
        context_processors:
          input_1:
            rules_tokens: {  }
          operator:
            rules_tokens: {  }
          input_2:
            rules_tokens: {  }
        provides_mapping: {  }
      -
        id: rules_action
        uuid: e59088ad-a27f-4f7b-ae0f-7f4aca7c73ad
        weight: -45
        action_id: rules_data_set
        context_values: {  }
        context_mapping:
          data: node.uid.entity.field_balance_a_vacations_day
          value: result
        context_processors: {  }
        provides_mapping: {  }
      -
        id: rules_action
        uuid: 23448f67-b0d3-4659-ad55-fee086721cd3
        weight: -44
        action_id: rules_entity_save
        context_values:
          immediate: '1'
        context_mapping:
          entity: node.uid.entity
        context_processors:
          immediate:
            rules_tokens: {  }
        provides_mapping: {  }
