uuid: e91962d0-ffc6-4e6c-bc99-f04b396a1611
langcode: en
status: false
dependencies:
  config:
    - field.field.node.certificate.field_employee
    - field.field.node.transaction.field_certificate
    - field.field.node.transaction.field_owner
    - field.field.node.transaction.field_status_transactions
    - field.storage.node.field_certificate
    - field.storage.node.field_employee
    - field.storage.node.field_owner
    - field.storage.node.field_status_transactions
    - node.type.certificate
    - node.type.transaction
  module:
    - eca_base
    - eca_content
    - eca_user
id: process_gpvdmmv
modeller: bpmn_io
label: 'Burning days'
version: ''
weight: null
events:
  Event_0nncjf3:
    plugin: 'content_entity:update'
    label: 'UPD CERTIFICATE'
    configuration:
      type: 'node certificate'
    successors:
      -
        id: Activity_12dcx2s
        condition: ''
  Event_0lrklph:
    plugin: 'content_entity:custom'
    label: 'CUSTOM EVENT'
    configuration:
      event_id: x1
    successors:
      -
        id: Activity_118c826
        condition: ''
conditions:
  Flow_0ih9kkp:
    plugin: eca_scalar
    configuration:
      negate: false
      case: false
      left: '[disabled_certificate:field_current_state_certificate:value]'
      right: state_certificate_disabled
      operator: equal
      type: value
gateways: {  }
actions:
  Activity_12dcx2s:
    plugin: eca_token_load_entity
    label: 'load certificate'
    configuration:
      token_name: disabled_certificate
      from: current
      entity_type: _none
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_1fk0rxz
        condition: ''
  Activity_1fk0rxz:
    plugin: eca_switch_account
    label: switch
    configuration:
      user_id: '1'
    successors:
      -
        id: Activity_0a95lti
        condition: Flow_0ih9kkp
  Activity_0a95lti:
    plugin: eca_new_entity
    label: 'create transaction'
    configuration:
      token_name: burning_transaction
      type: 'node transaction'
      langcode: ''
      label: 'Burning day from Certificate #[disabled_certificate]'
      published: true
      owner: '1'
    successors:
      -
        id: Activity_04oym5v
        condition: ''
  Activity_04oym5v:
    plugin: eca_set_field_value
    label: 'set field OWNER'
    configuration:
      field_name: field_owner
      field_value: '[disabled_certificate:field_employee:entity]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[burning_transaction]'
    successors:
      -
        id: Activity_1cwcz1g
        condition: ''
  Activity_1cwcz1g:
    plugin: eca_set_field_value
    label: 'set field Certificate'
    configuration:
      field_name: field_certificate
      field_value: '[disabled_certificate]'
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[burning_transaction]'
    successors:
      -
        id: Activity_1hc6nci
        condition: ''
  Activity_1hc6nci:
    plugin: eca_set_field_value
    label: 'set field TYPE TRANSACTION'
    configuration:
      field_name: field_status_transactions
      field_value: transaction_type_spent_when_burning_day
      method: 'set:clear'
      strip_tags: false
      trim: false
      save_entity: false
      object: '[burning_transaction]'
    successors:
      -
        id: Activity_05xauvi
        condition: ''
  Activity_05xauvi:
    plugin: eca_save_entity
    label: 'save transaction'
    configuration:
      object: '[burning_transaction]'
    successors:
      -
        id: Activity_1q7qoyv
        condition: ''
  Activity_1q7qoyv:
    plugin: eca_trigger_content_entity_custom_event
    label: TRIGGER
    configuration:
      event_id: x1
      tokens: ''
      object: '[burning_transaction]'
    successors: {  }
  Activity_118c826:
    plugin: eca_token_load_entity
    label: transaction
    configuration:
      token_name: current_transaction
      from: current
      entity_type: node
      entity_id: ''
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: ''
    successors:
      -
        id: Activity_1vdp8vd
        condition: ''
  Activity_1vdp8vd:
    plugin: eca_token_load_entity_ref
    label: Activity_1vdp8vd
    configuration:
      field_name_entity_ref: field_owner
      token_name: owner_transaction
      from: id
      entity_type: user
      entity_id: '[current_transaction:field_owner:entity:uid]'
      revision_id: ''
      properties: ''
      langcode: _interface
      latest_revision: false
      unchanged: false
      object: '[current_transaction]'
    successors:
      -
        id: Activity_18iqi6y
        condition: ''
      -
        id: Activity_01wdmra
        condition: ''
  Activity_18iqi6y:
    plugin: action_message_action
    label: Activity_18iqi6y
    configuration:
      replace_tokens: false
      message: '#[owner_transaction] -> owner Transaction'
    successors: {  }
  Activity_01wdmra:
    plugin: eca_switch_account
    label: 'switch to owner'
    configuration:
      user_id: '[owner_transaction]'
    successors: {  }
